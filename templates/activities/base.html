{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "base.html" %}
{% load i18n %}
{% load messageboard_tags %}
{% load notifications_tags %}

{% block content %}
{% get_unread_notifications_count as unread_notifications %}
{% get_unread_messages_count as unread_messages %}
<div class="columns" data-controller="sidebar">
  <div class="column col-3 col-md-12 hide-md bg-gray p-2"
       data-target="sidebar.nav"
       >
       <div class="show-md hide-lg text-center mb-2">
         <a href="#"
            class="btn btn-sm"
            data-action="sidebar#toggle"
            >{% trans "Close Sidebar" %}</a>
       </div>
    {% block activities_sidebar %}
    {% include "activities/includes/sidebar.html" %}
    {% endblock %}
  </div>

  <div class="column col-9 col-md-12" data-target="sidebar.main">
    <div class="show-md hide-lg float-right mb-2">
      <a href="#"
         class="btn btn-sm"
         data-action="sidebar#toggle"
         >
         {% with total_unread_count=unread_notifications|add:unread_messages %}
         <span {% if total_unread_count %}class="badge" data-badge="{{ total_unread_count }}"{% endif %}>
           {% trans "Sidebar" %}
         </span>
        {% endwith %}
      </a>
    </div>
    <div class="clearfix"></div>
    {% block activities_content %}{% endblock %}
  </div>
</div>
{% endblock content %}
