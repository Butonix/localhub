{# Copyright (c) 2020 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "activities/base.html" %}

{% load i18n %}
{% load activities %}

{% block subtitle %} / {{ view.model|verbose_name_plural|title }} /
{% if object %}{{ object.title }} / {% trans "Edit" %}
{% else %}{% trans "Submit" %}{% endif %}{% endblock %}

{% block content %}

{% resolve_model_url view.model "list" as list_url %}

<ul class="breadcrumb">

  {% if object %}

  {% if object.published %}
  <li class="breadcrumb-item">
    <a href="{{ list_url }}">{{ view.model|verbose_name_plural|title }}</a>
  </li>
  {% else %}
  <li class="breadcrumb-item"><a href="{% url 'activities:private' %}">{% trans "Private Stash" %}</a></li>
  {% endif %}

  <li class="breadcrumb-item"><a href="{{ object.get_absolute_url }}">{{ object.title|truncatechars:60 }}</a></li>
  <li class="breadcrumb-item"><a href="#">{% trans "Edit" %}</a></li>

  {% else %}

  {% if view.is_private %}
  <li class="breadcrumb-item"><a href="{% url 'activities:private' %}">{% trans "Private Stash" %}</a></li>
  {% else %}
  <li class="breadcrumb-item">
    <a href="{{ list_url }}">{{ view.model|verbose_name_plural|title }}</a>
  </li>
  {% endif %}
  <li class="breadcrumb-item">
    <a data-turbolinks="false"
       href="#">{% trans "Submit" %}</a>
  </li>
  {% endif %}

</ul>

{% block form %}
{% include "activities/includes/activity_form.html" with multipart=True %}
{% endblock %}

{% endblock content %}
