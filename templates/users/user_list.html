{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "activities/base.html" %}

{% load i18n %}
{% load rules %}


{% block activities_content %}
{% has_perm "communities.manage_community" user request.community as can_manage %}
{% if can_manage %}
<a class="float-right btn btn-primary" href="{% url 'communities:membership_list' %}">
    <i class="icon icon-edit"></i>
    {% trans "Edit member settings" %}
</a>
{% endif %}

<h3>{% trans "Members" %}</h3>
<table class="table table-striped table-hover">
    {% if user.is_authenticated %}
    <thead>
        <tr>
            <th>{% trans "Member" %}</th>
            <th>{% trans "Following?" %}</th>
        </tr>
    </thead>
    {% endif %}
    <tbody>
        {% for member in object_list %}
        <tr>
            <td>
                {% include "users/includes/chip.html" with profile=member %}
            </td>
            {% if user.is_authenticated %}
            <td>
                {% if user == member %}
                -
                {% else %}
                <label class="form-checkbox">
                    <input type="checkbox" disabled {% if member.has_subscribed %} checked {% endif %}>
                    <i class="form-icon"></i>
                </label>
                {% endif %}
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% include "includes/pagination.html" %}
{% endblock activities_content %}
