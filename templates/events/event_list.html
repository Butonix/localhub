{% extends "activities/base.html" %}
{% load i18n %}
{% load rules %}
{% block subtitle %} - {% trans "Events" %}{% endblock %}

{% block activities_content %}
{% has_perm 'activities.create_activity' user request.community as can_create_activity %}
{% if can_create_activity %}
<div class="new-post">
  <a href="{% url 'events:create' %}" class="btn btn-block btn-primary">
    <i class="icon icon-time"></i> {% trans "Submit Event" %}
  </a>
</div>

{% elif user.is_authenticated %}
<p class="bg-gray p-2 text-center">
  {% url 'join_requests:create' as join_request_url %}
  {% blocktrans %}You do not have permission to submit events to this site. You can send a request to join this community <a href="{{ join_request_url }}">here</a>.{% endblocktrans %}
</p>

{% else %}
<p class="bg-gray p-2 text-center">
  {% url 'account_login' as login_url %}
  {% blocktrans %}Please <a href="{{ login_url }}?next={{ request.get_full_path }}">sign in</a> to submit events to this site.{% endblocktrans %}
</p>

{% endif %}

{% if user.is_authenticated %}
<p class="mt-2">
    {% if view.show_all %}
    <a href="{{ request.path }}?all">{% trans "Show All" %}</a>
    {% else %}
    <a href="{{ request.path }}">{% trans "Show Following" %}</a>
    {% endif %}
</p>
{% endif %}


{% for event in object_list %}
<div class="mt-2">
  {% include "events/includes/event.html" %}
</div>
{% empty %}
<div class="empty mt-2">
  <p class="empty-title h5">{% trans "No events in the calendar right now." %}</p>
</div>
{% endfor %}


{% include "includes/pagination.html" %}
{% endblock activities_content %}
