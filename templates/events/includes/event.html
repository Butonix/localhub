{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "activities/includes/activity_base.html" %}

{% load i18n %}

{% block content %}
<dl>

  <dt>{% trans "Starts" %}</dt>
  <dd>{{ object.starts|date:"SHORT_DATE_FORMAT" }} @ {{ object.starts|date:"TIME_FORMAT" }}</dd>

  {% if object.ends %}
  <dt>{% trans "Ends" %}</dt>
  <dd>{{ object.ends|date:"SHORT_DATE_FORMAT" }} @ {{ object.ends|date:"TIME_FORMAT" }}</dd>
  {% endif %}


  <dt>{% trans "Timezone" %}</dt>
  <dd>{{ object.timezone }}</dd>

  <dt>{% trans "Location" %}</dt>
  <dd>
  {% with location=object.full_location %}
  {% if location %}
  {{ location }}
  {% else %}
  {% trans "Online" %}
  {% endif %}
  {% endwith %}
  </dd>

  {% if object.ticket_price %}
  <dt>{% trans "Admission" %}</dt>
  <dd>{{ object.ticket_price }}</dd>
  {% endif %}

  {% if object.ticket_vendor %}
  <dt>{% trans "Tickets available from" %}</dt>
  <dd>{{ object.ticket_vendor|linebreaksbr }}</dd>
  {% endif %}

</dl>
{% if is_detail and object.latitude and object.longitude %}
<div id="map-for-event-{{ object.id }}"
     class="event-map{% if is_detail %} event-map-lg{% endif %}"
     data-controller="map"
     data-map-latitude="{{ object.latitude }}"
     data-map-longitude="{{ object.longitude }}"
     ></div>
{% endif %}
{% include "events/includes/content.html" %}
{% endblock content %}

{% block actions %}
<a href="{% url 'events:download' object.id %}"
   title="{% trans 'Download .ics calendar file' %}"
   download>
  {% trans "Download" %}
</a>
{% if not is_detail and object.latitude and object.longitude %}
<a href="{{ object.get_absolute_url }}#map-for-event-{{ object.id }}">
  {% trans "Map" %}
</a>
{% endif %}
{{ block.super }}
{% endblock actions %}
