{% load i18n %}
{% load rules %}
{% has_perm "activities.change_activity" user event as can_change_event %}
{% has_perm "activities.delete_activity" user event as can_delete_event %}
{% has_perm "activities.flag_activity" user event as can_flag_event %}
{% has_perm "activities.like_activity" user event as can_like_event %}

<div class="btn-group">

    {% if can_like_event %}
    <button class="btn btn-sm{% if event.has_liked %} d-hide{% endif %}"
            id="event-like-btn-{{ event.id }}"
            data-controller="ajax"
            data-action="ajax#post"
            data-ajax-url="{% url 'events:like' event.id %}"
            data-ajax-toggle="#event-dislike-btn-{{ event.id }}"
            ><i class="icon icon-check"></i> {% trans "Like" %}</button>
    <button class="btn btn-sm{% if not event.has_liked %} d-hide{% endif %}"
            id="event-dislike-btn-{{ event.id }}"
            data-controller="ajax"
            data-action="ajax#post"
            data-ajax-url="{% url 'events:dislike' event.id %}"
            data-ajax-toggle="#event-like-btn-{{ event.id }}"
            ><i class="icon icon-cross"></i> {% trans "Unlike" %}</button>
    {% endif %}

    {% if can_flag_event and not event.has_flagged %}
    <a class="btn btn-sm" href="{% url 'events:flag' event.id %}">
        <i class="icon icon-flag"></i> {% trans "Flag" %}
    </a>
    {% endif %}

    {% if can_change_event %}
    <a class="btn btn-sm" href="{% url 'events:update' event.id %}"
                          ><i class="icon icon-edit"></i> {% trans "Edit" %}</a>
    {% endif %}

    {% if can_delete_event %}
    {% url 'events:delete' event.id as delete_url %}
    <a class="btn btn-sm"
       href="{{ delete_url }}"
       data-controller="ajax confirm"
       data-action="confirm#check ajax#delete"
       data-ajax-url="{{ delete_url }}"
       data-confirm-header="{% trans 'Delete Event' %}"
       data-confirm-body="{% trans 'Are you sure you want to delete this event?' %}"
       ><i class="icon icon-delete"></i> {% trans "Delete" %}</a>
    {% endif %}

</div>

