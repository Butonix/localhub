{# Copyright (c) 2020 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% load i18n %}
{{ form.media }}

{% csrf_token %}

<div class="bg-red-500 text-white font-semibold p-3 mb-4 text-center hidden"
     data-target="form.errorMessage">
  {% trans "Sorry, an error has occurred with your form" %}
  <div data-target="form.errorDetail"></div>
</div>

{% include "includes/forms/non_field_errors.html" %}

{% for field in form.hidden_fields %}
{{ field }}
{% endfor %}

{% if form.form_helper %}
{% for fieldset in form.form_helper %}
<fieldset>

  {% if fieldset.label %}
  <div class="p-1 font-semibold border-b border-gray-500 mb-2 text-center">{{ fieldset.label }}</div>
  {% elif not forloop.first %}
  <hr class="p-1 font-semibold border-b border-gray-500 mb-2">
  {% endif %}

  {% for field in fieldset %}
  {% include "includes/forms/field.html" %}
  {% endfor %}
</fieldset>
{% endfor %}
{% else %}
{% for field in form.visible_fields %}
{% include "includes/forms/field.html" %}
{% endfor %}
{% endif %}
