{# Copyright (c) 2020 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% load i18n %}

<form {% spaceless %}
      method="{{ method|default:'POST' }}"
      action="{{ action|default:request.path }}"
      {% if form|is_multipart %}
      enctype="multipart/form-data"
      {% endif %}
      {% if form_id %}
      id="{{ form_id }}"
      {% endif %}
      class="{{ css_class|default:"p-1 md:p-3 border border-gray-500 lg:w-3/4" }}"
      {% block form_extra_attrs %}{% endblock %}
      {% endspaceless %}>

  {% if form.errors %}
  {% block form_error_message %}
  <div class="absolute z-50 w-4/5 lg:w-1/3 flex items-center text-center p-3 text-white bg-red-800"
       data-controller="alert">
    <div class="mx-auto text-center">
      {% trans "Sorry, your form contains errors!" %}
    </div>
    <button data-action="alert#dismiss"
            class="">
      {% svg "x_circle" "white" %}
    </button>
  </div>
  {% trans 'Sorry, this form contains errors!' %}
  {% endblock %}
  {% endif %}

  {% block form_fields %}
  {% include "includes/forms/fields.html" %}
  {% endblock form_fields %}
  <div class="flex text-center mt-2 pt-2 border-t">
    {% block form_buttons %}
    <button type="submit"
            name="submit"
            class="btn btn-primary mr-2">
      {{ submit_btn|default:_("Submit") }}
    </button>
    {% endblock %}
  </div>
</form>
