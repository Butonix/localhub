{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "activities/activity_base.html" %}

{% load i18n %}
{% load activities_tags %}

{% block content %}

{% with user|is_oembed_url:object.url as is_oembed %}
{% include "activities/includes/oembed.html" %}
{% if object.opengraph_description and not is_oembed %}
<div class="columns metadata{% if not is_detail %} metadata-small{% endif %}">
  {% with opengraph_image=object.get_opengraph_image_if_safe %}
  {% if opengraph_image %}
  <div class="column col-3 col-md-12">
    <img src="{{ opengraph_image }}"
         alt="{{ object.title }}"
         class="img-responsive">
  </div>
  {% endif %}
  <div class="column col-{{ opengraph_image|yesno:"9,12" }} col-md-12">
    <p>
      {{ object.opengraph_description|html_unescape|urlize|truncatewords_html:300 }}
    </p>
  </div>
  {% endwith %}
</div>
<div class="divider"></div>
{% endif %}
{% include "activities/includes/description.html" %}
{% endwith %}
{% endblock content %}