{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% load i18n %}
{% load micawber_tags %}

<div class="card bg-gray">
  <div class="card-header">
    <div class="card-subtitle text-gray float-right">
      {% blocktrans with post.created|timesince as created %}{{ created }} ago{% endblocktrans %}
    </div>
    {% if post.title %}
    <div class="card-title h5"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></div>
    <div class="card-subtitle h6"><a href="{{ post.owner.get_profile_url }}">{{ post.owner.username }}</a></div>
    {% else %}
    <div class="card-title h5"><a href="{{ post.owner.get_profile_url }}">{{ post.owner.username }}</a></div>
    {% endif %}
  </div>
  <div class="card-body">
    <div class="divider"></div>
    {% if post.description %}
    <div>
      {{ post.description.markdown|truncatewords_html:60 }}
      <a href="{{ post.get_absolute_url }}">{% trans "Read more" %}</a>
    </div>
    {% endif %}
    {% if post.url %}
    <div>
      {{ post.url|oembed }}
    </div>
    {% endif %}
  </div>
  <div class="card-footer">
    <div class="mb-2">
      <a href="{{ post.get_absolute_url }}#comments">{% trans "Comments" %} ({{ post.num_comments }})</a>
    </div>
    {% include "posts/includes/actions.html" with show_comments=True %}
  </div>

</div>
