{% load i18n %}
{% if page_obj.number == 1 %}
{% if form %}
{% url 'content:create' as create_post_url %}
<input type="text"
       class="form-input"
       id="share-input"
       placeholder="{% trans 'Share...' %}"
       data-ic-trigger-on="click"
       data-ic-get-from="{{ create_post_url }}"
       data-ic-target="#post-form-content"
       data-ic-action="toggleClass: d-none"
       data-ic-action-target="#share-input,#post-form"
       readonly
       />
<form id="post-form"
      data-ic-target="#post-form-content"
      data-ic-post-to="{{ create_post_url }}"
      class="d-none">
  <div id="post-form-content"></div>
  <button type="submit" class="btn btn-primary">{% trans "Submit" %}</button>
  <button class="btn btn-secondary"
          data-ic-action="toggleClass: d-none"
          data-ic-action-target="#post-form,#share-input">{% trans "Cancel" %}</button>
</form>
<div class="divider"></div>

{% elif not user.is_authenticated %}
<p class="bg-gray p-2 text-center">
  {% url 'account_login' as login_url %}
  {% blocktrans %}Please <a href="{{ login_url }}">sign in</a> to post content to this site.{% endblocktrans %}
</p>

{% elif not form %}
<p class="bg-gray p-2 text-center">
  {% trans "You do not have permission to post to this site." %}
</p>
{% endif %}
{% endif %}

{% for post in object_list %}
<div data-ic-target="closest .content-card">
  {% include "content/includes/post_detail.html" %}
</div>
{% endfor %}


{% include "includes/pagination.html" with ic_target="#posts" %}
