{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "messageboard/base.html" %}

{% load i18n %}

{% block messageboard_content %}

{% if paginator.count or view.search_query %}
{% include "includes/search_form.html" %}
{% endif %}

<p class="toast text-center my-1 d-hide"
   data-controller="cookie-notice"
   data-cookie-notice-name="messageboard-emails"
   data-cookie-notice-domain="{{ community.domain }}">
  <button class="btn btn-clear float-right" data-action="cookie-notice#accept"></button>
  {% url 'user_update' as user_settings_url %}
  {% blocktrans %}You can enable emails for new messages <a href="{{ user_settings_url }}">in your settings</a>.{% endblocktrans %}
</p>

{% if object_list %}

<table class="table table-striped table-hover">
  <thead>
    <th>{% trans "Subject" %}</th>
    <th>{% trans "From" %}</th>
  </thead>
  <tbody>
    {% for recipient in object_list %}
    <tr>
      <td>
        <a href="{{ recipient.get_absolute_url }}">
          {% if not recipient.read %}<strong>{% endif %}
            {{ recipient.message.subject|truncatechars:60 }}
            {% if not recipient.read %}</strong>{% endif %}
        </a>
        <div class="info">
          {% blocktrans with created=recipient.message.created|timesince %}
          {{ created }} ago
          {% endblocktrans %}
        </div>
      </td>
      <td>
        {% include "users/includes/chip.html" with profile=recipient.message.sender %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% include "includes/pagination.html" %}
{% else %}
{% include "includes/empty.html" %}
{% endif %}
{% endblock messageboard_content %}


