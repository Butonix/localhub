{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "invites/base.html" %}
{% load i18n %}
{% load rules %}

{% block content %}

<h3>{% trans "Invites" %}</h3>

<div class="actions">
  <a href="{% url 'invites:create' %}">
    {% trans "Send an invite" %}
  </a>
</div>

<div class="divider"></div>

{% if object_list %}
<table class="table table-striped table-hover table-responsive-md">
  <thead>
    <tr>
      <th>{% trans "Email" %}</th>
      <th>{% trans "Status" %}</th>
      <th>{% trans "Email Sent" %}</th>
      <th>{% trans "Actions" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for invite in object_list %}
    <tr>
      <td>{{ invite.email }}</td>
      <td>{{ invite.get_status_display }}</td>
      <td>{{ invite.sent|date }}</td>
      <td>
        <div class="actions actions-sm">
          {% if invite.is_pending %}
          <a href="{% url 'invites:resend' invite.id %}">{% trans "Re-send" %}</a>
          {% endif %}
          {% url 'invites:delete' invite.id as delete_url %}
          <a href="{{ delete_url }}"
             data-controller="ajax confirm"
             data-action="confirm#check ajax#delete"
             data-confirm-header="{% trans 'Delete invite' %}"
             data-confirm-body="{% trans 'You sure you want to delete this invite?' %}"
             >{% trans "Delete" %}</a>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
{% include "includes/empty.html" %}
{% endif %}


{% endblock content %}

