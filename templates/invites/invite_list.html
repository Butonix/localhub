{% extends "invites/base.html" %}
{% load i18n %}
{% load rules %}

{% block settings_content %}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>{% trans "Email" %}</th>
      <th>{% trans "Status" %}</th>
      <th>{% trans "Email Sent" %}</th>
      <th>{% trans "Actions" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for invite in object_list %}
    <tr>
      <td>{{ invite.email }}</td>
      <td>{{ invite.get_status_display }}</td>
      <td>{{ invite.sent|date }}</td>
      <td>
        {% if invite.is_pending %}
        <a class="btn btn-sm" href="{% url 'invites:resend' invite.id %}">{% trans "Re-send" %}</a>
        {% else %}
        <a class="btn btn-sm disabled" href="#">{% trans "Re-send" %}</a>
        {% endif %}
        {% url 'invites:delete' invite.id as delete_url %}
        <a class="btn btn-sm btn-warning"
           href="{{ delete_url }}"
           data-controller="ajax confirm"
           data-action="confirm#check ajax#delete"
           data-ajax-url="{{ delete_url }}"
           data-confirm-header="{% trans 'Delete invite' %}"
           data-confirm-body="{% trans 'You sure you want to delete this invite?' %}"
           >{% trans "Delete" %}</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center">{% trans "No invites at the moment" %}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>


<div class="mt-2">
  <a class="btn btn-primary" href="{% url 'invites:create' %}">{% trans "Send an invite" %}</a>
</div>

{% endblock settings_content %}

