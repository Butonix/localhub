{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "notifications/base.html" %}
{% load i18n %}

{% block subtitle %} | {% trans "Notifications" %}{% endblock %}

{% block content %}

<h3>{% trans "Notifications" %}</h3>

{% if object_list %}
<div class="actions">
  {% if is_unread_notifications %}
  <a href="{% url 'notifications:mark_all_read' %}"
     data-controller="ajax"
     data-action="ajax#post"
     >{% trans "Mark All As Read" %}</a>
  {% endif %}
  <a href="{% url 'notifications:delete_all' %}"
     data-controller="confirm ajax"
     data-action="confirm#check ajax#delete"
     data-confirm-header="{% trans 'Delete All' %}"
     data-confirm-body="{% trans 'Are you sure you want to delete all your notifications?' %}"
     >{% trans "Delete All" %}</a>
</div>
{% endif %}


<p class="toast text-center my-1 d-hide"
   data-controller="cookie-notice"
   data-cookie-notice-name="notifications-emails"
   data-cookie-notice-domain="{{ community.domain }}">
  <button class="btn btn-clear float-right" data-action="cookie-notice#accept"></button>
  {% url 'user_update' as user_settings_url %}
  {% blocktrans %}You can enable emails for your notifications <a href="{{ user_settings_url }}">in your settings</a>.{% endblocktrans %}
</p>

{% for notification in object_list %}
<div class="my-1">
  {% with content_type=notification.content_type.name content_object=notification.content_object %}
  {% if content_type == "post" %}
  {% include "activities/includes/notification.html" with activity=content_object activity_name="post" %}
  {% elif content_type == "photo" %}
  {% include "activities/includes/notification.html" with activity=content_object activity_name="photo" %}
  {% elif content_type == "event" %}
  {% include "activities/includes/notification.html" with activity=content_object activity_name="event" %}
  {% elif content_type == "comment" %}
  {% include "comments/includes/notification.html" with comment=content_object %}
  {% elif content_type == "user" %}
  {% include "users/includes/notification.html" with user_obj=content_object %}
  {% endif %}
  {% endwith %}
</div>
{% empty %}
{% include "includes/empty.html" %}
{% endfor %}

{% include "includes/pagination.html" %}
{% endblock %}
