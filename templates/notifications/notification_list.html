{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "notifications/base.html" %}
{% load i18n %}
{% block activities_content %}

{% if object_list %}
<div class="mb-2 float-right">
  {% if is_unread_notifications %}
  <button class="btn btn-primary"
          data-controller="ajax"
          data-action="ajax#post"
          data-ajax-url="{% url 'notifications:mark_all_read' %}"
          ><i class="icon icon-check"></i> {% trans "Mark All as Read" %}</button>
  {% endif %}
  <button class="btn btn-warning"
          data-controller="confirm ajax"
          data-action="confirm#check ajax#delete"
          data-ajax-url="{% url 'notifications:delete_all' %}"
          data-confirm-header="{% trans 'Delete All' %}"
          data-confirm-body="{% trans 'Are you sure you want to delete all your notifications?' %}"
          ><i class="icon icon-delete"></i> {% trans "Delete All" %}</button>
</div>
<div class="clearfix"></div>
{% endif %}

{% for notification in object_list %}
<div class="mb-2">
  {% with content_type=notification.content_type.name content_object=notification.content_object %}
  {% if content_type == "post" %}
  {% include "posts/includes/notification.html" with post=content_object %}
  {% elif content_type == "photo" %}
  {% include "photos/includes/notification.html" with photo=content_object %}
  {% elif content_type == "event" %}
  {% include "events/includes/notification.html" with event=content_object %}
  {% elif content_type == "comment" %}
  {% include "comments/includes/notification.html" with comment=content_object %}
  {% endif %}
  {% endwith %}
  {% if not forloop.last %}
  <hr />
  {% endif %}
</div>
{% empty %}
<div class="empty">
  <div class="empty-icon">
    <i class="icon icon-mail"></i>
  </div>
  <p class="empty-title h5">{% trans "You have no new notifications" %}</p>
</div>
{% endfor %}

{% include "includes/pagination.html" %}
{% endblock %}
