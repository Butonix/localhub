{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "private_messages/base.html" %}

{% load i18n %}
{% load private_messages_tags %}

{% block content %}
<h5>{% trans "Direct Messages" %}</h5>

<div class="actions">
    <a href="{% url 'private_messages:inbox' %}">{% trans "Inbox" %}</a>
    <a href="{% url 'private_messages:outbox' %}">{% trans "Outbox" %}</a>
</div>
<div class="divider"></div>

<div class="mb-1">
    {% include "includes/forms/search_form.html" %}
</div>

{% if object_list %}
<div class="text-center my-2 toast d-hide"
     data-controller="cookie-notice"
     data-cookie-notice-name="recipients-send-message">
    <button class="btn btn-clear float-right"
            data-action="cookie-notice#accept"></button>
    {% blocktrans %}
    Select a recipient below and click the "Send Message" link. You cannot send messages
    to other members you have blocked, or who have blocked you.
    {% endblocktrans %}
</div>


<table class="table table-hover table-responsive">
    <tbody>
        {% for object in object_list %}
        <tr>
            <td>
                {% url 'users:messages' object.username as profile_url %}
                {% include "users/includes/chip.html" with profile=object %}
                {% if object.role == "admin" or object.role == "moderator" %}
                <div class="chip bg-primary">{{ object.role_display }}</div>
                {% endif %}
            </td>
            <td>
                <div class="float-right-responsive">
                    <a href="{% url 'private_messages:message_create' object.username %}">{% trans "Send Message" %}</a>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% include "includes/pagination.html" %}
{% else %}
{% include "includes/empty.html" %}
{% endif %}

{% endblock content %}