{# Copyright (c) 2020 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "private_messages/base.html" %}

{% load i18n %}
{% load account %}
{% load private_messages %}

{% block subtitle %}{% if recipient %} / {% user_display recipient %}{% endif %} /
{{ parent|yesno:_("Reply,Send Message") }} {% endblock %}

{% block content %}

{% if parent or recipient %}
<ul class="breadcrumbs mb-4">
  {% if parent %}
  <li class="breadcrumb"><a href="{{ parent.get_absolute_url }}">{% trans "Parent" %}</a></li>
  <li class="breadcrumb">
    <a href="#">
      {% if parent.sender == user %}{% trans "Follow-Up" %}{% else %}{% trans "Reply" %}{% endif %}
    </a>
  </li>
  {% elif recipient %}
  <li class="breadcrumb"><a href="{% url 'users:messages' recipient.username %}">{% user_display recipient %}</a>
  </li>
  <li class="breadcrumb">
    {% trans "Send Message" %}
  </li>
  {% endif %}
</ul>
{% endif %}

{% if parent %}
{% render_message request user parent is_detail=True %}
{% include "includes/forms/stimulusjs_form.html" with css_class="px-2 py-5 border border-gray-500 w-full" %}
{% else %}
<h1 class="page-header mb-4">{% trans "Send Message" %}</h1>
{% include "includes/forms/stimulusjs_form.html" %}
{% endif %}


{% endblock %}
