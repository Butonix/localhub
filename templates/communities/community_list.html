{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "base.html" %}
{% load i18n %}
{% load thumbnail %}

{% block subtitle %} | {% trans "Local Network" %}{% endblock %}

{% block content %}
<h3>{% trans "Local Network" %}</h3>
<div class="divider"></div>

{% include "includes/search_form.html" %}

<table class="table table-striped table-hover table-responsive-sm">
    <thead>
        <tr>
            <th>{% trans "Community" %}</th>
            <th>{% trans "Members" %}</th>
            <th>{% trans "Tagline" %}</th>
        </tr>
    </thead>
    <tbody>
        {% for object in object_list %}
        <tr>
            <td>
                <div class="d-flex align-center">
                    {% thumbnail object.logo "40x40" format="PNG" as logo %}
                    <div class="mr-1">
                        <img src="{{ logo.url }}"
                             width="{{ logo.width }}"
                             height="{{ logo.height }}"
                             alt="{% trans 'Logo' %}"
                             class="img-responsive"
                             >
                    </div>
                        {% endthumbnail %}
                        <div>
                            {% if object == community %}
                            {{ object.name }}
                            {% else %}
                            <a href="{{ object.get_absolute_url }}">{{ object.name }}</a>
                            {% endif %}

                            {% if object.is_member %}
                            <span class="chip bg-primary">{% trans "Member" %}</span>
                            {% endif %}

                            {% if not object.public %}
                            <span class="chip bg-dark">{% trans "Private" %}</span>
                            {% endif %}
                        </div>
                </div>
            </td>
            <td>{{ object.num_members }}</td>
            <td>{{ object.tagline|default:"-"|linebreaksbr }}</td>
        </tr>
        {% endfor %}

    </tbody>
</table>

{% include "includes/pagination.html" %}
{% endblock content %}
